# 重构，第一个示例
通过使用一个剧院演出的示例， 演示需求改变时的引起的代码重构。  
  
## 重构代码前需要做的准备：  
1. 当需要添加新功能时， 如果代码缺乏良好的结构而不易于进行更改， 那最好先重构原来的代码， 使其结构易于添加新功能，再添加新的功能。
2. 准备一套可靠的单元测试，以确保重构后原功能可以正常使用
3. 怎么样才是好的代码? 小而美? 便于其他人修改? 命名良好可读性好?


## 第一章主要的重构代码的手法：  
1. 提炼函数 *106  
   为了函数单一职责;  
   需要注意局部变量的引用；  
   改变函数声明 *124, 具体方式:  
    - 以查询函数取代临时变量 *178
    - 移除局部变量, 使用内联变量 *123
2. 拆分循环 *227  
   把循环内部的混杂的逻辑才分成多个循环,每个循环只做一件事情;  
   以管道取代循环 *231  
   

3. 以多态取代条件表达式 *272  
   把条件判断放在子类中;  
   - 以子类取代类型码 *362
   - 以工厂函数取代构造函数 *334
